<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Website</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        #video-container {
            position: relative;
        }

        #camera-preview {
            width: 100%;
            max-width: 600px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }

        #record-btn {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            font-size: 16px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="video-container">
        <video id="camera-preview" playsinline></video>
        <button id="record-btn">Record Video</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('camera-preview');
            const recordBtn = document.getElementById('record-btn');
            let mediaRecorder;
            let recordedChunks = [];

            // Request permission to use the camera and microphone
            navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                .then((stream) => {
                    video.srcObject = stream;
                    mediaRecorder = new MediaRecorder(stream);

                    mediaRecorder.ondataavailable = (event) => {
                        if (event.data.size > 0) {
                            recordedChunks.push(event.data);
                        }
                    };

                    mediaRecorder.onstop = () => {
                        const blob = new Blob(recordedChunks, { type: 'video/webm' });
                        const videoURL = URL.createObjectURL(blob);
                        console.log('Recorded Video:', videoURL);

                        // You can send the videoURL to a server or perform other actions here

                        // Reset recordedChunks for the next recording
                        recordedChunks = [];
                    };

                    // Start recording when the button is clicked
                    recordBtn.addEventListener('click', () => {
                        if (mediaRecorder.state === 'inactive') {
                            recordedChunks = []; // Reset chunks for a new recording
                            mediaRecorder.start();
                            recordBtn.style.backgroundColor = '#3498db';
                            recordBtn.textContent = 'Stop Recording';
                        } else {
                            mediaRecorder.stop();
                            recordBtn.style.backgroundColor = '#e74c3c';
                            recordBtn.textContent = 'Record Video';
                        }
                    });
                })
                .catch((error) => {
                    console.error('Error accessing the camera:', error);
                });
        });
    </script>
</body>
</html>
